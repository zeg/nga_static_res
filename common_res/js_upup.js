if (!window.ubbcode)var ubbcode={}
ubbcode.upup = {
baseImg:'data:image/png;base64,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',
c:null,
ct :null,
img:null,
txt:function(o,t){
t = t+''
if(t.length>7 || t.length<1)
	return
var self = this
if(!this.img){
	this.img = []
	this.img[0] = _$('/img').$0('src',this.baseImg,'style',{display:'none'},'onload',function(){
		self.txt(o,t)
		})
	document.body.appendChild(this.img[0])
	return
	}
if(!this.c){
	this.c=_$('/canvas').$0('width',50,'height',73,'style',{display:'none'})
	document.body.appendChild(this.c)
	this.ct = this.c.getContext("2d")
	}
var cc = _$('/canvas').$0('width',(this.c.width-5)*t.length+5,'height','73','style'),cct = cc.getContext("2d")

for(var i=0;i<t.length;i++){
	this.ct.setTransform(1,0,0,1,0,0)
	this.ct.clearRect(0,0,this.c.width, this.c.height)
	this.ct.drawImage(this.img[0],0,0);
	this.ct.font="27px 'Microsoft YaHei', Sans-serif";
	this.ct.setTransform(
		0.65,//scaleX,
		0.3,//skewH,
		-0.675,//skewV,
		0.5,//scaleY,
		10,//moveX,
		15//moveY
		)
	this.ct.fillText(t[i],0,0)

	cct.drawImage(this.c, (this.c.width-5)*i, 0 );

	}
o.appendChild(cc)
}//fe
}//ce


;(function(){

var $=_$
,crl = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96.406 96" width="96px" height="96px"><circle cx="48.203" cy="48.078" r="48.203"/><path d="M48.234 90.28a42.17 42.17 0 1 1 42.17-42.17 42.17 42.17 0 0 1-42.17 42.17zm0-78.314A36.145 36.145 0 1 0 84.38 48.11a36.145 36.145 0 0 0-36.146-36.144z" fill="#fff" fill-rule="evenodd"/>'
,svgbtn1 = crl+'<path d="M27.157 26.78h42.156V68.94H27.157V26.78zm6.025 6.02h30.12v30.126h-30.12V32.8z" fill="#fb99c5" fill-rule="evenodd"/></svg>'
,svgbtn2 = crl+'<path d="M70.325 65.792l-4.26 4.26-17.837-17.838-17.834 17.838-4.26-4.26 17.834-17.837L26.13 30.117l4.26-4.26L48.23 43.7l17.837-17.843 4.26 4.26-17.837 17.838z" fill="#88abda" fill-rule="evenodd"/></svg>'
,svgbtn3 = crl+'<path d="M48.238 16.888l27.1 48.193h-54.2zm.014 13.04l16.242 28.89H32.008z" fill="#13b5b1" fill-rule="evenodd"/></svg>'
,svgbtn4 = crl+'<path d="M48.235 21.875a25.97 25.97 0 1 1-25.97 25.97 25.97 25.97 0 0 1 25.97-25.97zm.02 6.135a19.83 19.83 0 1 1-19.83 19.83 19.83 19.83 0 0 1 19.83-19.83z" fill="#ff7897" fill-rule="evenodd"/></svg>'
//fs
,gen1 = function(im,le,de,tx){
var sl,bt,
t2 = 100,//滑块平移时长
t3 = 75,//滑块收缩时长
t31 = 50,//滑块回弹前延时
t4 =60,//滑块回弹时长
t1 = 200,//主容器旋转时长
sc1 = 0.3,//文字放大幅度
sc2 = 1.2,//文字背景放大
sd1 = 3,//文字背景阴影
txx = [],j,n
for(var i=0;i<tx.length;i++){
	j = Math.random()
	txx.push(
		$('/span','style','display:inline-block;fontSize:1em;padding:0 0.1em;transform:scale('+(1+sc1/tx.length*i)+','+(1.2+sc1/tx.length*i)+') rotate('+(3+j*3)*(j>0.5?1:-1)+'deg);'+(j>0.5 && !n?(n='color:#000;background:#fff;line-height:1.3em;'):''),'innerHTML',tx[i])
		)
	}


var gensvg = function(){
	var x = arguments[0],y = arguments[1]+sd1
	,sv = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+x+' '+y+'" width="'+x+'px" height="'+y+'px"><polygon points="'
	for(var i=2;i<arguments.length;i+=2)
		sv+=arguments[i]+' '+(arguments[i+1]+sd1)+','
	sv = sv.substr(0,sv.length-1)
	sv+='" fill="#f00"/><polygon points="'
	for(var i=2;i<arguments.length;i+=2)
		sv+=(arguments[i]-sd1)+' '+arguments[i+1]+','
	sv = sv.substr(0,sv.length-1)
	sv+='" fill="#000"/></svg>'
	return sv
	}

return $('/div','style','width:20em;height:2em;position:absolute;left:0;bottom:0;paddingLeft:'+le+'em;transform-origin:bottom left;transform: rotate(0deg);transition: all 0.1s ease-out',//主容器
	$('/div','style','width:20em;height:2em;transform-origin:bottom left;transform: rotate('+de+'deg);transition: all 0.1s ease-out',//滑块容器 有偏角
		sl = $('/div','style','width:20em;height:2em;transform-origin:bottom left;visibility:hidden',//横向滑块
			$('/div','style','float:left;width:3em;height:2em;background:#ff0000'),
			$('/div','style','float:left;padding:0 0.5em;marginLeft:-0.5em;lineHeight:1.3em;color:#fff;font-family:"Arial Black", "Arial Bold", Gadget, sans-serif',txx,
				'_genbg',function(){
					var y = this.offsetHeight*sc2, y1 = y * (1+sc1), x=this.offsetWidth
					,sv = gensvg(x,y1,  0,y1*sc1*0.6,  x,0,  x,y1,  0,y1-y1*sc1*0.4)
					this._.css('height',(y1+sd1)+'px','lineHeight',(y1+sd1)+'px','verticalAlign','middle','background', 'url("data:image/svg+xml;,'+encodeURIComponent(sv)+'") no-repeat')
					var z = Math.random()*(y1-y)+y, v = Math.random()*z/2+z/4, u=this.previousSibling.offsetWidth
					,sv = gensvg(x,z,  0,v,  u,0,  u,z)
					this.previousSibling._.css('height',z+'px','background', 'url("data:image/svg+xml;,'+encodeURIComponent(sv)+'") no-repeat')
					}
				),
			'_go',function(){
				//console.log(2)
				var o = this
				o._.css('transition','transform '+t2+'ms ease-out')
				o.style.transform = 'translate(0,0) scale(0.85,1.1)'
				setTimeout(//收缩
					function(){
						o.style.transition='all '+t3+'ms ease-out'
						o.style.transform = 'translate(0,0) scale(0.5,1.25)'
						setTimeout(//回弹
							function(){
								o.style.transition='all '+t4+'ms ease-out'
								o.style.transform = 'translate(0,0) scale(1)'

								},
							t3+t31
							)
						},
					t2+5
					)
				}
			)
		),$('/div','style','clear:both;height:0px;lineHeight:0px;fontSize:0px'),
	bt=$('/img','src',im,'style','width:2em;height:2em;position:relative;top:-2em;left:1em;transform-origin:center middle;transform:rotate(0deg) scale(0,1);transition: all '+t1+'ms ease-out'),
	'_sl',sl,
	'_go',function(d){
		//console.log(1)
		var o = this
		sl.lastChild._genbg()
		sl._.css('visibility','','transform','translate(40em,0) scale(0)')
		o.style.transform = 'rotate('+d+'deg)'
		bt.style.transform = 'rotate('+(d*-1)+'deg) scale(1,1)'
		setTimeout(function(){o._sl._go()}, 0)
		}
	)
}//fe


window.ubbcode.psBtn = function(t3,t1,t2,t4){
if(!('transition' in document.body.style))
	return
var x,y,z,w
,c = $('/div','style','position:absolute;left:400px;top:400px;',
	x = gen1('data:image/svg+xml;,'+encodeURIComponent (svgbtn1), 1, -5, t1),//左
	y = gen1('data:image/svg+xml;,'+encodeURIComponent (svgbtn4), 7, 3, t2),//右
	z = gen1('data:image/svg+xml;,'+encodeURIComponent (svgbtn3), 5.3, 7, t3),//上
	w = gen1('data:image/svg+xml;,'+encodeURIComponent (svgbtn2), 4, -10, t4),//下
	'_go',function(){
		setTimeout(function(){x._go(-15)},75)
		setTimeout(function(){y._go(-8)},100)
		z._go(-36)
		setTimeout(function(){w._go(18)},30)
		}
	)
return c
}//fe

})();



;(function(){
var img,mo,sr=__IMG_STYLE+'/moss.gif'
ubbcode.mossBtn = function(e,o){
if(!img){
	img = new Image()
	img.onload = function(){ubbcode.mossBtn(e,o)}
	img.src=sr
	return
	}
var p = o.getBoundingClientRect(), q=__NUKE.position.get()
if(mo)
	mo.parentNode.removeChild(mo)
mo = _$('/div','style','borderTop:1px solid #000;width:99px;height:89px;position:absolute;left:'+(p.left-42+q.xf)+'px;top:'+(p.bottom+q.yf)+'px;background:url('+sr+') no-repeat;backgroundPosition:0 -89px;transition:background-position 2300ms ease-out;')
document.body.appendChild(mo)
setTimeout(function(){mo.style.backgroundPosition='0 0'},100)
setTimeout(function(){mo.onclick=function(){this.parentNode.removeChild(this)}},8000)
}//
})();